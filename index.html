<!DOCTYPE html>

<head>
    <script>

const SECUENCIA_DNI = "TRWAGMYFPDXBNJZSQVHLCKE";
        //TODO HACED QUE FUNCIONE EL CÁLCULO DE LA LETRA PARA DNI EXTRANEJEROS
        
        function calcularLetraNIF (numero)
        {
            var letra;
               var resto = numero % SECUENCIA_DNI.length;
               var letra = SECUENCIA_DNI.charAt(resto);
            
            return letra;
        }
        function rellenaCeros (cadena)
        {
            var cadena_ceros = cadena;
                while (cadena_ceros.length<7)
                {
                    cadena_ceros = "0"+cadena_ceros;
                }
            return cadena_ceros;
        }
        function calcularLetra ()
        { //inicio 
            var letra_calculada;
            var cadena_prefijo;
            var numero_dni;
            //0 OBTENER LA LETRA SI ES EXTRANJERO EL NUMERO
            var combo_select = document.getElementById("select_letra");
            var num_opcion = combo_select.selectedIndex;//obtengo la opción seleccionada
            //1OBTENER EL NUMERO DE LA CAJA
            
            var caja = document.getElementById("numdni");
            var cadena_dni = caja.value;
            console.log(typeof cadena_dni);
            switch (num_opcion)
            {
                case 0:
                case 1: //nacional o X
                console.log("Es dni nacional o X");
                numero_dni = parseInt(caja.value);
                break;
                case 2: //Y
                console.log("Es dni Y");
                cadena_prefijo = rellenaCeros(cadena_dni);
                cadena_prefijo = "1"+cadena_prefijo;
                numero_dni = parseInt(cadena_prefijo);
                break;
                case 3: //Z
                console.log("Es dni Z");
                cadena_prefijo = rellenaCeros(cadena_dni);
                cadena_prefijo = "2"+cadena_prefijo;
                numero_dni = parseInt(cadena_prefijo);
                break;
            }
        
            console.log(typeof numero_dni);
            letra_calculada = calcularLetraNIF(numero_dni);
            
            //2CALCULAR LA LETRA
            //3MOSTRAR
            alert("La letra es " +letra_calculada);
        }
    </script>
    <style>
        .titulos1 {
            color: darkblue;
            font-size: 23px;
        }

        .titulos1:hover {
            color: red;
            font-size: 23px;
        }
    </style>
</head>

<body>
    <h1 class="titulos1">Calcular Letra DNI</h1>

    <select id="select_letra">
            <!--opción por defecto-->
            <option selected>NACIONAL</option>
            <option>X</option>
            <option>Y</option>
            <option>Z</option>
        </select>
    <input type="text" id="numdni">
    <button type="button" onclick="calcularLetra();">Calcular</button>

</body>
<footer>

</footer>